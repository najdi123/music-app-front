{"ast":null,"code":"import _objectSpread from \"C:\\\\30\\\\music-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\30\\\\music-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\30\\\\music-app\\\\client\\\\src\\\\pages\\\\user\\\\SignIn.js\";\nimport React, { useState } from 'react';\nimport Layout from \"../../components/Layout\";\nimport { Link } from \"react-router-dom\";\nimport axios from 'axios';\n\nconst Signin = () => {\n  const _useState = useState({\n    email: '',\n    password: '',\n    error: '',\n    success: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        formData = _useState2[0],\n        setFormData = _useState2[1];\n\n  const email = formData.email,\n        password = formData.password,\n        error = formData.error;\n\n  const clickSubmit = async event => {\n    event.preventDefault();\n    setFormData(_objectSpread({}, formData));\n    await axios.interceptors.response.use(response => {\n      // do something with the response data\n      // console.log('Response was received');\n      return response;\n    }, error => {\n      // handle the response error\n      // console.log(error.response.data.message)\n      setFormData(_objectSpread({}, formData, {\n        error: error.response.data.message,\n        success: false\n      }));\n      return Promise.reject(error.response);\n    });\n    await axios({\n      method: 'post',\n      url: 'http://localhost:5000/api/login',\n      data: {\n        email,\n        password\n      }\n    }).then(response => {\n      console.log(response);\n      setFormData(_objectSpread({}, formData, {\n        success: true\n      }));\n      localStorage.setItem('myData', response.data.token);\n      localStorage.setItem('type', response.data.type);\n    }, error => {\n      console.log(error);\n    });\n  };\n\n  const handleChange = name => event => {\n    setFormData(_objectSpread({}, formData, {\n      error: false,\n      [name]: event.target.value\n    }));\n  };\n\n  const showError = () => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, error));\n\n  const showSuccess = () => React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    style: {\n      display: formData.success ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"You are signed in\");\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Layout, {\n    title: \"Sign In\",\n    description: \"Sign into your account\",\n    className: \"container col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, showSuccess()), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, showError()), React.createElement(\"form\", {\n    action: \"\",\n    className: \"container col-8 offset-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Email\",\n    value: email,\n    onChange: handleChange('email'),\n    type: \"email\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Password\",\n    value: password,\n    onChange: handleChange('password'),\n    type: \"password\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    onClick: clickSubmit,\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"Sign In\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"Don't have an account? \", React.createElement(Link, {\n    to: \"./register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"Register\"), \" \")));\n};\n\nexport default Signin;","map":{"version":3,"sources":["C:/30/music-app/client/src/pages/user/SignIn.js"],"names":["React","useState","Layout","Link","axios","Signin","email","password","error","success","formData","setFormData","clickSubmit","event","preventDefault","interceptors","response","use","data","message","Promise","reject","method","url","then","console","log","localStorage","setItem","token","type","handleChange","name","target","value","showError","display","showSuccess"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport Layout from \"../../components/Layout\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport axios from 'axios'\r\n\r\nconst Signin = () => {\r\n\r\n    const [formData, setFormData] = useState({\r\n\r\n        email: '',\r\n        password: '',\r\n\r\n        error: '',\r\n        success: false\r\n    })\r\n\r\n    const { email, password, error } = formData;\r\n\r\n\r\n    const clickSubmit = async event => {\r\n        event.preventDefault()\r\n\r\n            setFormData({...formData})\r\n\r\n            await axios.interceptors.response.use((response) => {\r\n                // do something with the response data\r\n                // console.log('Response was received');\r\n\r\n                return response;\r\n            }, error => {\r\n                // handle the response error\r\n                // console.log(error.response.data.message)\r\n                setFormData({...formData, error: error.response.data.message, success: false})\r\n                return Promise.reject(error.response);\r\n            });\r\n\r\n            await axios({\r\n                method: 'post',\r\n                url: 'http://localhost:5000/api/login',\r\n                data: { email, password }\r\n            })\r\n                .then((response) => {\r\n                    console.log(response);\r\n                    setFormData({...formData, success: true})\r\n                    localStorage.setItem('myData', response.data.token);\r\n                    localStorage.setItem('type', response.data.type);\r\n            },\r\n                (error) => {\r\n                    console.log(error);\r\n            });\r\n            \r\n    }\r\n\r\n    const handleChange = name => event => {\r\n        setFormData({...formData, error: false, [name]: event.target.value})\r\n    }\r\n\r\n    const showError = () => (\r\n        <div>\r\n\r\n            {/*<h3>{values.error} </h3>*/}\r\n            <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n                {error}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-success\" style={{display: formData.success ? '' : 'none'}}>\r\n            You are signed in\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <Layout\r\n                title=\"Sign In\"\r\n                description=\"Sign into your account\"\r\n                className=\"container col-md-8 offset-md-2\"\r\n            />\r\n\r\n            {/*<div className=\"text-center\">{values.success ? showSuccess() : showError()}</div>*/}\r\n            <div className=\"text-center\">\r\n                {showSuccess()}\r\n            </div>\r\n            <div className=\"text-center\">\r\n                {showError()}\r\n            </div>\r\n\r\n            <form action=\"\" className=\"container col-8 offset-2\">\r\n                <div className=\"form-group\">\r\n\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Email</label>*/}\r\n                    <input\r\n                        placeholder=\"Email\"\r\n                        value={email}\r\n                        onChange={handleChange('email')}\r\n                        type=\"email\" className=\"form-control\"\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Password</label>*/}\r\n                    <input\r\n                        placeholder=\"Password\"\r\n                        value={password}\r\n                        onChange={handleChange('password')} type=\"password\" className=\"form-control\"/>\r\n                </div>\r\n\r\n                <button onClick={clickSubmit} className=\"btn btn-primary\">Sign In</button>\r\n                <p>Don't have an account? <Link to=\"./register\" >Register</Link> </p>\r\n            </form>\r\n\r\n        </div>\r\n\r\n\r\n    )\r\n}\r\nexport default Signin;\r\n\r\n"]},"metadata":{},"sourceType":"module"}