{"ast":null,"code":"import _slicedToArray from \"C:\\\\30\\\\music-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\30\\\\music-app\\\\client\\\\src\\\\components\\\\songs\\\\SingleSong.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport ReactPlayer from 'react-player';\nimport './DisplaySongs.css';\nimport OtherSongsFromSinger from \"./OtherSongsFromSinger\";\nimport { Link } from \"react-router-dom\";\nimport loggedReducer from \"../../reducers/isSigned\";\n\nconst DisplaySongs = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1]; // const [data2, setData2] = useState([]);\n  // const [loading, setLoading] = useState(true)\n  // let location = useLocation();\n  // console.log(location.state.songId);\n\n\n  const songId = useLocation().state.songId.toString();\n  useEffect(() => {\n    const fetchData = async () => {\n      console.log('async fetch data1');\n      let res = await fetch(`http://localhost:5000/api/showSong/${songId}`);\n      let response = await res.json();\n      setData(response);\n    };\n\n    fetchData(); // fetch(`http://localhost:5000/api/showSong/${songId}`)\n    //     .then(res => res.json())\n    //     .then(res => setData(res))\n    //     // .then(\n    //     //     fetch(`http://localhost:5000/api/showSongsBySinger/singer?singer=Mohi`)\n    //     //         .then(res => res.json())\n    //     //         .then(data2 => (setData2(data2.reverse())), console.log(data2))\n    //     //         .catch(err => console.log(err))\n    //     // )\n    //     .catch(err => console.log(err));\n    // getSingersOtherSongs();\n  }, [songId]);\n\n  const LikeSong = async e => {\n    e.preventDefault();\n    let token = localStorage.getItem('myData');\n    await fetch(`http://localhost:5000/api/like/${songId}`, {\n      method: 'PUT',\n      headers: new Headers({\n        // 'Content-Type': 'text/plain',\n        'auth-token': token\n      }),\n      credentials: \"same-origin\"\n    }).then(res => res.json()).then(res => {\n      console.log('Liked:', res.message);\n      return res;\n    }).catch(err => console.error(err));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"bg-light mb-5 mt-5 p-md-5 col-lg-6 container \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"text-center pt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \" \", data.songName, \" \\u0622\\u0647\\u0646\\u06AF \\u062C\\u062F\\u06CC\\u062F \"), React.createElement(\"p\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \" \", data.singer, \" \\u0627\\u0632\"), React.createElement(\"img\", {\n    width: \"100%\",\n    src: \"http://localhost:5000/\" + data.imageURL,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(ReactPlayer, {\n    url: \"http://localhost:5000/\" + data.songURL,\n    playing: false,\n    controls: true,\n    light: false,\n    height: 40,\n    width: '100%',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"form\", {\n    method: \"get\",\n    action: \"http://localhost:5000/\" + data.songURL,\n    className: \" d-inline-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary m-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"\\u062F\\u0627\\u0646\\u0644\\u0648\\u062F\")), React.createElement(\"p\", {\n    className: \"d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, data.views, \" views\"), data.likes ? console.log(data.likes.length) : console.log('ab'), React.createElement(\"p\", {\n    className: \"d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, data.likes ? data.likes.length : '', \" Likes\"), React.createElement(\"i\", {\n    className: \"fas fa-thumbs-up\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: LikeSong,\n    className: \" d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  })), React.createElement(\"p\", {\n    className: \"d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"category: \", data.category)), React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(OtherSongsFromSinger, {\n    data: data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  })));\n};\n\nexport default DisplaySongs;","map":{"version":3,"sources":["C:/30/music-app/client/src/components/songs/SingleSong.js"],"names":["React","useState","useEffect","useLocation","ReactPlayer","OtherSongsFromSinger","Link","loggedReducer","DisplaySongs","data","setData","songId","state","toString","fetchData","console","log","res","fetch","response","json","LikeSong","e","preventDefault","token","localStorage","getItem","method","headers","Headers","credentials","then","message","catch","err","error","songName","singer","imageURL","songURL","views","likes","length","category"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\n\r\nimport {useLocation} from 'react-router';\r\n\r\nimport ReactPlayer from 'react-player';\r\nimport './DisplaySongs.css';\r\nimport OtherSongsFromSinger from \"./OtherSongsFromSinger\";\r\nimport {Link} from \"react-router-dom\";\r\nimport loggedReducer from \"../../reducers/isSigned\";\r\n\r\n\r\nconst DisplaySongs = () => {\r\n    const [data, setData] = useState([]);\r\n    // const [data2, setData2] = useState([]);\r\n    // const [loading, setLoading] = useState(true)\r\n\r\n    // let location = useLocation();\r\n    // console.log(location.state.songId);\r\n    const songId = useLocation().state.songId.toString();\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            console.log('async fetch data1')\r\n            let res = await fetch(`http://localhost:5000/api/showSong/${songId}`);\r\n            let response = await res.json();\r\n            setData(response);\r\n        };\r\n        fetchData();\r\n        // fetch(`http://localhost:5000/api/showSong/${songId}`)\r\n        //     .then(res => res.json())\r\n        //     .then(res => setData(res))\r\n        //     // .then(\r\n        //     //     fetch(`http://localhost:5000/api/showSongsBySinger/singer?singer=Mohi`)\r\n        //     //         .then(res => res.json())\r\n        //     //         .then(data2 => (setData2(data2.reverse())), console.log(data2))\r\n        //     //         .catch(err => console.log(err))\r\n        //     // )\r\n        //     .catch(err => console.log(err));\r\n        // getSingersOtherSongs();\r\n\r\n    }, [songId]);\r\n\r\n    const LikeSong = async (e) => {\r\n        e.preventDefault()\r\n        let token = localStorage.getItem('myData');\r\n\r\n        await fetch(`http://localhost:5000/api/like/${songId}`, {\r\n            method: 'PUT',\r\n            headers: new Headers({\r\n                // 'Content-Type': 'text/plain',\r\n                'auth-token':token\r\n            }),\r\n            credentials: \"same-origin\"\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                console.log('Liked:', res.message)\r\n                return res\r\n            })\r\n            .catch(err => console.error(err))\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"\">\r\n\r\n\r\n            <div className=\"bg-light mb-5 mt-5 p-md-5 col-lg-6 container \">\r\n\r\n                <p className=\"text-center pt-2\"> {data.songName} آهنگ جدید </p>\r\n                <p className=\"text-center\"> {data.singer} از</p>\r\n                <img width=\"100%\" src={\"http://localhost:5000/\" + data.imageURL} alt=\"\"/>\r\n                {/*<a href={\"http://localhost:5000/\" + data.songURL}><p*/}\r\n                {/*    className=\"text-center\">دانلود</p></a>*/}\r\n\r\n                <ReactPlayer\r\n                    url={\"http://localhost:5000/\" + data.songURL}\r\n                    playing={false}\r\n                    controls={true}\r\n                    light={false}\r\n                    height={40}\r\n                    width={'100%'}\r\n                />\r\n                <form method=\"get\" action={\"http://localhost:5000/\" + data.songURL} className=\" d-inline-block\">\r\n                    <button type=\"submit\" className=\"btn btn-primary m-1\">\r\n                        {/*<p className=\"text-center\">*/}\r\n                        دانلود\r\n                        {/*download*/}\r\n                        {/*</p>*/}\r\n                    </button>\r\n                </form>\r\n                <p className=\"d-inline-block ml-3\">{data.views} views</p>\r\n                {/*{console.log(data.likes)}*/}\r\n                {data.likes ? console.log(data.likes.length):console.log('ab')}\r\n                <p className=\"d-inline-block ml-3\">{data.likes ? data.likes.length : ''} Likes</p>\r\n                <i className=\"fas fa-thumbs-up\"><button onClick={LikeSong} className=\" d-inline-block ml-3\">\r\n                </button></i>\r\n\r\n                <p className=\"d-inline-block ml-3\">category: {data.category}</p>\r\n\r\n            </div>\r\n\r\n            <div className=\"\">\r\n\r\n                <OtherSongsFromSinger data={data}/>\r\n\r\n                {/*{data2.map((item, i) =>*/}\r\n                {/*    <div key={i} >*/}\r\n                {/*        <img src={\"http://localhost:5000/\"+item.imageURL} alt={item.songName}  className=\"songImage\"/>*/}\r\n                {/*        <div className=\" text-center d-block\">*/}\r\n                {/*            <h5>{item.songName}</h5>*/}\r\n                {/*            <p>{item.singer}</p>*/}\r\n                {/*        </div>*/}\r\n                {/*    </div>*/}\r\n                {/*)}*/}\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DisplaySongs;"]},"metadata":{},"sourceType":"module"}