{"ast":null,"code":"import _slicedToArray from \"C:\\\\30\\\\music-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\30\\\\music-app\\\\client\\\\src\\\\components\\\\songs\\\\SingleSong.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport ReactPlayer from 'react-player';\nimport './DisplaySongs.css';\nimport OtherSongsFromSinger from \"./OtherSongsFromSinger\";\nimport { Link } from \"react-router-dom\";\nimport loggedReducer from \"../../reducers/isSigned\";\n\nconst DisplaySongs = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const _useState3 = useState({\n    songName: '',\n    singer: '',\n    imageURL: '',\n    songURL: '',\n    views: '',\n    likes: ''\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        data3 = _useState4[0],\n        setData3 = _useState4[1];\n\n  const _useState5 = useState({\n    likesNumber: '',\n    error: ''\n  }),\n        _useState6 = _slicedToArray(_useState5, 2),\n        likes = _useState6[0],\n        setLikes = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        error = _useState8[0],\n        setEroor = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        commentText = _useState10[0],\n        setCommentText = _useState10[1];\n\n  const _useState11 = useState([]),\n        _useState12 = _slicedToArray(_useState11, 2),\n        showComments = _useState12[0],\n        setShowComments = _useState12[1]; // const [data2, setData2] = useState([]);\n  // const [loading, setLoading] = useState(true)\n  // let location = useLocation();\n  // console.log(location.state.songId);\n\n\n  const songId = useLocation().state.songId.toString();\n  useEffect(() => {\n    const fetchData = async () => {\n      console.log('async fetch data1');\n      let res = await fetch(`http://localhost:5000/api/showSong/${songId}`);\n      let response = await res.json();\n      setData(response);\n      setData3({\n        songName: response.songName,\n        singer: response.singer,\n        imageURL: response.imageURL,\n        songURL: response.songURL,\n        category: response.category,\n        views: response.views,\n        likes: response.likes.length\n      });\n      setLikes({\n        likesNumber: response.likes.length\n      });\n    };\n\n    fetchData(); // fetch(`http://localhost:5000/api/showSong/${songId}`)\n    //     .then(res => res.json())\n    //     .then(res => setData(res))\n    //     // .then(\n    //     //     fetch(`http://localhost:5000/api/showSongsBySinger/singer?singer=Mohi`)\n    //     //         .then(res => res.json())\n    //     //         .then(data2 => (setData2(data2.reverse())), console.log(data2))\n    //     //         .catch(err => console.log(err))\n    //     // )\n    //     .catch(err => console.log(err));\n    // getSingersOtherSongs();\n  }, [songId]);\n\n  const LikeSong = async e => {\n    e.preventDefault();\n    let token = localStorage.getItem('myData');\n    await fetch(`http://localhost:5000/api/like/${songId}`, {\n      method: 'PUT',\n      headers: new Headers({\n        // 'Content-Type': 'text/plain',\n        'auth-token': token\n      }),\n      credentials: \"same-origin\"\n    }).then(res => res.json()).then(res => {\n      res.message ? fetch(`http://localhost:5000/api/unlike/${songId}`, {\n        method: 'PUT',\n        headers: new Headers({\n          // 'Content-Type': 'text/plain',\n          'auth-token': token\n        }),\n        credentials: \"same-origin\"\n      }).then(res => res.json()).then(res => setLikes({\n        likesNumber: res.length\n      })) : setLikes({\n        likesNumber: res.length\n      });\n      return res;\n    }).catch(err => console.error(err));\n  };\n\n  useEffect(() => {\n    // const GetComments = async () => {\n    fetch(`http://localhost:5000/api/comments/${songId}`).then(res => res.json()).then(data => setShowComments(data)).catch(err => console.log(err)); // }\n  }, []);\n\n  const SubmitComment = async e => {\n    e.preventDefault();\n    let token = localStorage.getItem('myData');\n    const objectText = {\n      commentText\n    };\n    await fetch(`http://localhost:5000/api/comment/5e20bdfef047ee2e5840fb78`, objectText, {\n      method: 'POST',\n      body: JSON.stringify(objectText),\n      headers: new Headers({\n        'Content-Type': 'application/json',\n        'auth-token': token\n      }),\n      credentials: \"cross-origin\"\n    }).then(res => res.json());\n  };\n\n  return React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"bg-light mb-5 mt-5 p-md-5 col-lg-6 container \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"text-center pt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \" \", data3.songName, \" \\u0622\\u0647\\u0646\\u06AF \\u062C\\u062F\\u06CC\\u062F \"), React.createElement(\"p\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \" \", data3.singer, \" \\u0627\\u0632\"), React.createElement(\"img\", {\n    width: \"100%\",\n    src: \"http://localhost:5000/\" + data3.imageURL,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }), React.createElement(ReactPlayer, {\n    url: \"http://localhost:5000/\" + data3.songURL,\n    playing: false,\n    controls: true,\n    light: false,\n    height: 40,\n    width: '100%',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }), React.createElement(\"form\", {\n    method: \"get\",\n    action: \"http://localhost:5000/\" + data3.songURL,\n    className: \" d-inline-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary m-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"\\u062F\\u0627\\u0646\\u0644\\u0648\\u062F\")), React.createElement(\"p\", {\n    className: \"d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, data3.views, \" views\"), data.likes ? console.log(data.likes.length) : console.log('ab'), console.log(likes.likesNumber), React.createElement(\"p\", {\n    className: \"d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, likes.likesNumber, \" Likes\"), React.createElement(\"i\", {\n    className: \"fas fa-thumbs-up d-inline-block ml-3 btn btn-primary\",\n    onClick: LikeSong,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }), error ? React.createElement(\"p\", {\n    className: \"d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, error) : '', React.createElement(\"p\", {\n    className: \"d-inline-block ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, \"category: \", data3.category), React.createElement(\"form\", {\n    onSubmit: SubmitComment,\n    className: \"p-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"bg-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"p-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"Leave a Comment\")), console.log(commentText), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(\"textarea\", {\n    className: \"btn-block p-1\",\n    name: \"commentText\",\n    cols: \"30\",\n    rows: \"5\",\n    placeholder: \"Comment on the song\",\n    value: commentText,\n    onChange: e => setCommentText(e.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-dark my-1\",\n    value: \"Submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }))), showComments.map((item, i) => React.createElement(\"div\", {\n    key: i,\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, console.log(item), React.createElement(\"div\", {\n    className: \"bg-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline-block ml-2 bg-white p-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, item.name + ': '), React.createElement(\"p\", {\n    className: \"d-inline-block ml-2 \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, item.text), React.createElement(\"p\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }))))), React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, React.createElement(OtherSongsFromSinger, {\n    data: data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  })));\n};\n\nexport default DisplaySongs;","map":{"version":3,"sources":["C:/30/music-app/client/src/components/songs/SingleSong.js"],"names":["React","useState","useEffect","useLocation","ReactPlayer","OtherSongsFromSinger","Link","loggedReducer","DisplaySongs","data","setData","songName","singer","imageURL","songURL","views","likes","data3","setData3","likesNumber","error","setLikes","setEroor","commentText","setCommentText","showComments","setShowComments","songId","state","toString","fetchData","console","log","res","fetch","response","json","category","length","LikeSong","e","preventDefault","token","localStorage","getItem","method","headers","Headers","credentials","then","message","catch","err","SubmitComment","objectText","body","JSON","stringify","target","value","map","item","i","name","text"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\n\r\nimport {useLocation} from 'react-router';\r\n\r\nimport ReactPlayer from 'react-player';\r\nimport './DisplaySongs.css';\r\nimport OtherSongsFromSinger from \"./OtherSongsFromSinger\";\r\nimport {Link} from \"react-router-dom\";\r\nimport loggedReducer from \"../../reducers/isSigned\";\r\n\r\n\r\nconst DisplaySongs = () => {\r\n    const [data, setData] = useState([]);\r\n    const [data3, setData3] = useState({\r\n        songName: '',\r\n        singer: '',\r\n        imageURL: '',\r\n        songURL: '',\r\n        views: '',\r\n        likes: ''\r\n    });\r\n    const [likes, setLikes] = useState({\r\n        likesNumber: '',\r\n        error: ''\r\n    })\r\n    const [error, setEroor] = useState('')\r\n    const [commentText, setCommentText] = useState('');\r\n    const [showComments, setShowComments] = useState([]);\r\n    // const [data2, setData2] = useState([]);\r\n    // const [loading, setLoading] = useState(true)\r\n\r\n    // let location = useLocation();\r\n    // console.log(location.state.songId);\r\n    const songId = useLocation().state.songId.toString();\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            console.log('async fetch data1')\r\n            let res = await fetch(`http://localhost:5000/api/showSong/${songId}`);\r\n            let response = await res.json();\r\n            setData(response);\r\n            setData3({\r\n                songName: response.songName,\r\n                singer: response.singer,\r\n                imageURL: response.imageURL,\r\n                songURL: response.songURL,\r\n                category: response.category,\r\n                views: response.views,\r\n                likes: response.likes.length\r\n            })\r\n            setLikes({\r\n                likesNumber : response.likes.length})\r\n        };\r\n        fetchData();\r\n        // fetch(`http://localhost:5000/api/showSong/${songId}`)\r\n        //     .then(res => res.json())\r\n        //     .then(res => setData(res))\r\n        //     // .then(\r\n        //     //     fetch(`http://localhost:5000/api/showSongsBySinger/singer?singer=Mohi`)\r\n        //     //         .then(res => res.json())\r\n        //     //         .then(data2 => (setData2(data2.reverse())), console.log(data2))\r\n        //     //         .catch(err => console.log(err))\r\n        //     // )\r\n        //     .catch(err => console.log(err));\r\n        // getSingersOtherSongs();\r\n\r\n    }, [songId]);\r\n\r\n    const LikeSong = async (e) => {\r\n        e.preventDefault()\r\n        let token = localStorage.getItem('myData');\r\n\r\n        await fetch(`http://localhost:5000/api/like/${songId}`, {\r\n            method: 'PUT',\r\n            headers: new Headers({\r\n                // 'Content-Type': 'text/plain',\r\n                'auth-token':token\r\n            }),\r\n            credentials: \"same-origin\"\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n\r\n                res.message\r\n                    ?\r\n\r\n                    fetch(`http://localhost:5000/api/unlike/${songId}`, {\r\n                        method: 'PUT',\r\n                        headers: new Headers({\r\n                            // 'Content-Type': 'text/plain',\r\n                            'auth-token':token\r\n                        }),\r\n                        credentials: \"same-origin\"\r\n                    }).then(res => res.json()).then(res => setLikes({ likesNumber: res.length }))\r\n\r\n\r\n                    :\r\n                    setLikes({\r\n                                    likesNumber: res.length\r\n                                });\r\n\r\n                return res\r\n            })\r\n            .catch(err => console.error(err))\r\n    };\r\n    useEffect(() => {\r\n        // const GetComments = async () => {\r\n            fetch(`http://localhost:5000/api/comments/${songId}`)\r\n                .then(res => res.json())\r\n                .then( data => ( setShowComments(data) ) )\r\n                .catch(err => console.log(err))\r\n        // }\r\n    },[]);\r\n\r\n    const SubmitComment = async (e) => {\r\n        e.preventDefault()\r\n        let token = localStorage.getItem('myData');\r\n\r\n        const objectText = {\r\n            commentText\r\n        }\r\n\r\n        await fetch(`http://localhost:5000/api/comment/5e20bdfef047ee2e5840fb78`, objectText, {\r\n            method: 'POST',\r\n            body: JSON.stringify(objectText),\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json',\r\n                'auth-token':token\r\n            }),\r\n            credentials: \"cross-origin\"\r\n        })\r\n            .then(res => res.json())\r\n\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"\">\r\n\r\n\r\n            <div className=\"bg-light mb-5 mt-5 p-md-5 col-lg-6 container \">\r\n\r\n                <p className=\"text-center pt-2\"> {data3.songName} آهنگ جدید </p>\r\n                <p className=\"text-center\"> {data3.singer} از</p>\r\n                <img width=\"100%\" src={\"http://localhost:5000/\" + data3.imageURL} alt=\"\"/>\r\n\r\n                <ReactPlayer\r\n                    url={\"http://localhost:5000/\" + data3.songURL}\r\n                    playing={false}\r\n                    controls={true}\r\n                    light={false}\r\n                    height={40}\r\n                    width={'100%'}\r\n                />\r\n                <form method=\"get\" action={\"http://localhost:5000/\" + data3.songURL} className=\" d-inline-block\">\r\n                    <button type=\"submit\" className=\"btn btn-primary m-1\">\r\n                        دانلود\r\n                    </button>\r\n                </form>\r\n                <p className=\"d-inline-block ml-3\">{data3.views} views</p>\r\n                {/*{console.log(data.comments ? data.comments[0]._id : '')}*/}\r\n                {data.likes ? console.log(data.likes.length):console.log('ab')}\r\n                {/*<p className=\"d-inline-block ml-3\">{data.likes ? data.likes.length : ''} Likes</p>*/}\r\n                {console.log(likes.likesNumber)}\r\n                <p className=\"d-inline-block ml-3\">{likes.likesNumber} Likes</p>\r\n                {/*<button onClick={LikeSong} className=\" d-inline-block ml-3\">*/}\r\n                <i className=\"fas fa-thumbs-up d-inline-block ml-3 btn btn-primary\" onClick={LikeSong}></i>\r\n                {/*</button>*/}\r\n                {error ? <p className=\"d-inline-block ml-3\">{error}</p> : '' }\r\n\r\n                <p className=\"d-inline-block ml-3\">category: {data3.category}</p>\r\n\r\n                <form onSubmit={SubmitComment} className=\"p-1\">\r\n                    {/*<label htmlFor=\"name\">Name: </label>*/}\r\n                    <div className='bg-primary'>\r\n                        <h4 className=\"p-1\">Leave a Comment</h4>\r\n                    </div>\r\n                    {console.log(commentText)}\r\n                    <div className=\"form-group\">\r\n                        <textarea\r\n                            className=\"btn-block p-1\"\r\n                            name=\"commentText\"\r\n                            cols='30'\r\n                            rows='5'\r\n                            placeholder=\"Comment on the song\"\r\n                            value={commentText}\r\n                            onChange={e => setCommentText(e.target.value)}\r\n                            required\r\n                        />\r\n                        <input type='submit' className='btn btn-dark my-1' value='Submit' />\r\n                    </div>\r\n                </form>\r\n                {\r\n                    showComments.map((item, i) =>\r\n                        <div key={i} className=\"\">\r\n                            {console.log(item)}\r\n                            <div className=\"bg-white\">\r\n                                <h5 className=\"d-inline-block ml-2 bg-white p-2\">{item.name + ': ' }</h5>\r\n                                <p className=\"d-inline-block ml-2 \">{item.text}</p>\r\n                                <p className=\"text-center\"></p>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                )}\r\n\r\n\r\n            </div>\r\n\r\n            <div className=\"\">\r\n\r\n                <OtherSongsFromSinger data={data}/>\r\n\r\n                {/*{data2.map((item, i) =>*/}\r\n                {/*    <div key={i} >*/}\r\n                {/*        <img src={\"http://localhost:5000/\"+item.imageURL} alt={item.songName}  className=\"songImage\"/>*/}\r\n                {/*        <div className=\" text-center d-block\">*/}\r\n                {/*            <h5>{item.songName}</h5>*/}\r\n                {/*            <p>{item.singer}</p>*/}\r\n                {/*        </div>*/}\r\n                {/*    </div>*/}\r\n                {/*)}*/}\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DisplaySongs;"]},"metadata":{},"sourceType":"module"}